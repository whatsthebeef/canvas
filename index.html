<?xml version="1.0"?>
<html>
  <head>
    <script src="js/jquery-1.7.1.js">
    </script>
    <script src="js/processing-1.3.6.js">
    </script>
    <script>
    
    var image = "images/hinamonkeybird.png";

    function sketchProc(p){

        // positional variables
        var xpos, ypos; 
        var maxYPos;
        var minImageYPos;
        var x;

        // dimensions
        var floorHeight = 400;     //  
        var imageSize = 100;       // Width and height of the shape
        var canvasWidth = 600;
        var canvasHeight = 420;
        
        // movement
        var xspeed = 1;  // Speed of the shape
        var xdirection = 1;  // Left or Right
        var frameRate = 10;
        var bounceHeight = 200.0;

        // graphics
        var background = 255; 
        var monkeybird; 

        p.setup = function(){
           // set up canvas 
           p.size(canvasWidth, canvasHeight);
           p.background(background);
           p.smooth();
           p.noStroke();
           p.frameRate(frameRate); 

           // character
           monkeybird = new p.PImage();
           monkeybird = p.loadImage(image);

           // positioning
           xpos = p.width/2;
           ypos = p.height/2;
           minImageYPos = floorHeight - imageSize;

           maxYPos = minImageYPos - bounceHeight;
           x = Math.sqrt(200) - 1;
        };

        p.draw = function(){
            p.background(background);

            // Y position
            // if ypos goes below max height rest x to where it initially cross
            // x axis
            if(ypos >= (400  - imageSize)) {
                x = x*(-1.0);
            }

            x = x + 0.5;

            // x^2 - 100 
            ypos = Math.pow(x, 2) + maxYPos;

            // X position
            xpos = xpos + (xspeed * xdirection);

            // Test to see if the shape exceeds the boundaries of the screen
            // If it does, reverse its direction by multiplying by -1
            if (xpos + imageSize > p.width || xpos < 0) {
                xdirection *= -1;
            }
            // Draw the shape
            console.log(xpos, ypos);
            p.image(monkeybird, xpos, ypos, imageSize, imageSize);
        };
    };

    $(document).ready(function(){
        var canvas = $("#canvas")[0];
        var sketch = new Processing.Sketch(sketchProc);
        sketch.imageCache.add(image);
        var processingInstance = new Processing(canvas, sketch);
    });

    </script>
  </head>
  <body>
    <canvas id="canvas"> </canvas>
  </body>
</html>
